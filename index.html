<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Private Chat</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <body>
        <ul id="messages">
            <!-- We'll be appending messages here using code -->
        </ul>

        <form id="form" action="">
            <input id="input" autocomplete="off"/>
            <button>Send</button>
        </form>


        
        <script src="/socket.io/socket.io.js"></script>
        <script>
            const socket = io.connect("http://localhost:8080");

            const messages = document.getElementById("messages");
            const form = document.getElementById('form');
            const input = document.getElementById('input');

            form.addEventListener('submit', function(e) {
                e.preventDefault();                     // Prevents the form from reloading page
                if (input.value) {
                    socket.emit('chat_message', input.value);
                    input.value = '';
                }
            });

            socket.on("chat_message", (msg) => {
                const newMsg = document.createElement("li");
                newMsg.innerText = msg;
                messages.appendChild(newMsg);
            });
        </script>
    </body>
</html>